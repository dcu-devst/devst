<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.devst.dao.BoardDao">
	<insert id="doWrite">
		INSERT INTO t_board ( title, content, category, hashtag, board_img) 
		VALUES ( #{title}, #{content}, #{category}, #{hashtag}, #{board_img});
	</insert>
	
	<select id="getBoardListAll" resultType="BoardVO">
		SELECT * FROM board_tb;
	</select>
	
	<select id="getBoardStudyList" resultType="BoardVO" parameterType="hashMap"><!--스터디구인게시물  -->
		<!-- SELECT * FROM t_board where category='스터디구인' order by board_pk desc limit #{start}, #{num}; -->
		SELECT  A.mem_nickname,A.mem_username, B.*
		FROM member_tb as A
		INNER JOIN board_tb as B
		ON A.mem_id = B.mem_id
		WHERE B.brd_category = '스터디구인'
		ORDER BY B.brd_id DESC
		LIMIT #{start}, #{num};
	</select>
	
	<select id="getBoardNomalList" resultType="HashMap" parameterType="hashMap"><!--일반게시물  -->
		SELECT  A.mem_nickname,A.mem_username, B.*
		FROM member_tb as A
		INNER JOIN board_tb as B
		ON A.mem_id = B.mem_id
		WHERE B.brd_category = '일반'
		ORDER BY B.brd_id DESC
		LIMIT #{start}, #{num};
	</select>
	
	<select id="getPageNum" resultType="java.lang.Integer">
		SELECT (TRUNCATE(COUNT(*)/10,0)+1) AS cnt FROM t_board WHERE category = #{category};
	</select>
</mapper>